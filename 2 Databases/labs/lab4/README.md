# Теория

**Индексы** — спискок всех значений в группе из одного или нескольких столбцов, упорядоченный в некотором приемлемом для данного типа данных смысле. Каждое значение имеет указатель на строку в таблице, где это значение встречается. (или по-простому это объекты базы данных, основная цель которого состоит в повышении производительности запросов).


Основные способы увеличения производительности БД: (15.1)
- Индексы
- Задание выражений SQL с учетом производительности
- Настройка физических параметров СУБД (конфиги, размер кеша для операторов, способы разделения пространства)
- Минимизация уровня локализации блокировки или использование оптимистической блокировки (см. разд. 9.3.2).

Повышение эффективности работы при использовании небольших транзак-
ций связано с тем, что при выполнении транзакции сервер накладывает на
данные блокировки.

Блокировкой называется временное ограничение на выполнение некоторых
операций обработки данных. Блокировка может быть наложена как на от-
дельную строку таблицы, так и на всю базу данных. Управлением блокиров-
ками на сервере занимается менеджер блокировок, контролирующий их при-
менение и разрешение конфликтов. Транзакции и блокировки тесно связаны
друг с другом. Транзакции накладывают блокировки на данные, чтобы обес-
печить выполнение требований ACID. Без использования блокировок несколь-
ко транзакций могли бы изменять одни и те же данные.

Блокировка представляет собой метод управления параллельными процесса-
ми, при котором объект базы данных не может быть модифицирован без ве-
дома транзакции. Производится блокирование доступа к объекту со стороны
других транзакций, чем исключается непредсказуемое изменение объекта.
Различают два вида блокировки:

-  блокировка записи — транзакция блокирует строки в таблицах таким об-
разом, что запрос другой транзакции к этим строкам будет отменен;
-  блокировка чтения — транзакция блокирует строки так, что запрос со сто-
роны другой транзакции на блокировку записи этих строк будет отверг-
нут, а на блокировку чтения — принят.

#### Недостатки использования индексов

Использование индексов имеет некоторые недостатки. На них расходуются
ресурсы.
- При всяком изменении или удалении содержимого индексированного
столбца, а также при добавлении новой строки индекс необходимо обнов-
лять. Это замедляет операции обновления. Однако обычно индексы не за-
медляют обновление на столько же, на сколько они ускоряют запросы.
- Индекс сам по себе занимает место — вдобавок к тому, что занимает таб-
лица. Индекс не обязательно должен храниться вместе с таблицей, если
только он не в той же схеме.
- При извлечении из таблицы очень большого числа строк использование
индекса — только потеря времени. Это несколько замедляет исполнение.

Решите, стоит ли индекс того места, которое он занимает, и превысит ли вы-
игрыш во времени исполнения запросов замедление обновлений. Чтобы
лучше понять ситуацию, рассмотрите следующие вопросы:
1. Как часто будет выполняться запрос к таблице и как часто она будет об-
новляться?
2. Насколько вероятно то, что обычные запросы и обновления будут выпол-
няться слишком медленно?
3. Как часто столбцы, которые вы собираетесь индексировать, будут исполь-
зоваться в предикатах, особенно в предикатах запросов?
4. Как часто столбцы, которые вы собираетесь индексировать, будут исполь-
зоваться в предикатах соединения (join)? Соединения в основном выпол-
няются медленнее, чем другие виды запросов, и выигрыш во времени по-
лучается больше.
5. Что для вас более важно: время исполнения или место на диске? Индексы
жертвуют одним ради другого. Обычно время более ценно, так как индексы
радикально уменьшают время исполнения, а места занимают не так уж много.
6. Имеются ли предпосылки для создания специальных видов индексов, та-
ких как индексы массивов битов или кластеры? Эти виды индексов и об-
ласти их применения подробно обсуждаются в 1 и 3.



